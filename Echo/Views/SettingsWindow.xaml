<Window x:Class="Echo.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Echo Settings" 
        Height="600" 
        Width="900"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Side Navigation -->
        <Border Grid.Column="0" 
                Background="{StaticResource SurfaceBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="0,0,1,0">
            <StackPanel Margin="12">
                <TextBlock Text="SETTINGS" 
                          FontSize="16" 
                          FontWeight="Bold"
                          Foreground="{StaticResource PrimaryBrush}"
                          Margin="8,16,8,24"/>
                
                <Button x:Name="BtnGeneral" 
                        Content="⚙️ General" 
                        Style="{StaticResource ToolButton}"
                        Padding="12,10"
                        Margin="0,0,0,8"
                        Click="NavigateToGeneral"/>
                
                <Button x:Name="BtnPackaging" 
                        Content="📦 Packaging" 
                        Style="{StaticResource ToolButton}"
                        Padding="12,10"
                        Margin="0,0,0,8"
                        Click="NavigateToPackaging"/>
                
                <Button x:Name="BtnAdvanced" 
                        Content="🔧 Advanced" 
                        Style="{StaticResource ToolButton}"
                        Padding="12,10"
                        Margin="0,0,0,8"
                        Click="NavigateToAdvanced"/>
            </StackPanel>
        </Border>

        <!-- Content Area -->
        <Grid Grid.Column="1">
            <!-- General Settings Panel -->
            <ScrollViewer x:Name="GeneralPanel" Visibility="Visible" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="32">
                    <TextBlock Text="General Settings" 
                              FontSize="24" 
                              FontWeight="Bold"
                              Margin="0,0,0,24"/>

                    <!-- BO3 Path -->
                    <TextBlock Text="Black Ops 3 Installation Path" 
                              FontSize="14" 
                              FontWeight="SemiBold"
                              Margin="0,0,0,8"/>
                    <TextBlock Text="Root directory where Black Ops 3 is installed" 
                              FontSize="12" 
                              Foreground="{StaticResource SubtleBrush}"
                              Margin="0,0,0,8"/>
                    <Grid Margin="0,0,0,24">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBox x:Name="BlackOps3PathTextBox"
                                Grid.Column="0"
                                Padding="10"
                                VerticalContentAlignment="Center"/>
                        
                        <Button Grid.Column="1" 
                               Content="Browse..." 
                               Width="100"
                               Height="36"
                               Margin="8,0,0,0"
                               Click="BrowseBlackOps3Path_Click"/>
                    </Grid>

                    <!-- Save Buttons -->
                    <StackPanel Orientation="Horizontal" 
                               HorizontalAlignment="Right"
                               Margin="0,24,0,0">
                        <Button Content="Cancel"
                              Width="100" 
                              Height="36" 
                              Margin="0,0,12,0"
                              Click="Cancel_Click"/>
                        <Button Content="Save"
                              Width="100" 
                              Height="36"
                              Click="Save_Click"
                              Style="{StaticResource PrimaryButton}"/>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>

            <!-- Packaging Settings Panel -->
            <ScrollViewer x:Name="PackagingPanel" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="32">
                    <TextBlock Text="Packaging Settings" 
                              FontSize="24" 
                              FontWeight="Bold"
                              Margin="0,0,0,24"/>

                    <!-- Output Directory -->
                    <TextBlock Text="Package Output Directory" 
                              FontSize="14" 
                              FontWeight="SemiBold"
                              Margin="0,0,0,8"/>
                    <TextBlock Text="Where to save created packages (default: Packaged/ in app directory)" 
                              FontSize="12" 
                              Foreground="{StaticResource SubtleBrush}"
                              Margin="0,0,0,8"/>
                    <Grid Margin="0,0,0,24">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBox x:Name="OutputDirectoryTextBox"
                                Grid.Column="0"
                                Padding="10"
                                VerticalContentAlignment="Center"/>
                        
                        <Button Grid.Column="1" 
                               Content="Browse..." 
                               Width="100"
                               Height="36"
                               Margin="8,0,0,0"
                               Click="BrowseOutputDirectory_Click"/>
                    </Grid>

                    <!-- Compression Format -->
                    <TextBlock Text="Compression Format" 
                              FontSize="14" 
                              FontWeight="SemiBold"
                              Margin="0,0,0,8"/>
                    <TextBlock Text="Archive format for packaged assets" 
                              FontSize="12" 
                              Foreground="{StaticResource SubtleBrush}"
                              Margin="0,0,0,8"/>
                    <ComboBox x:Name="CompressionFormatComboBox"
                             Padding="10"
                             Height="36"
                             Margin="0,0,0,24">
                        <ComboBoxItem Content="ZIP (.zip)" IsSelected="True"/>
                    </ComboBox>

                    <!-- Compression Level -->
                    <TextBlock Text="Compression Level" 
                              FontSize="14" 
                              FontWeight="SemiBold"
                              Margin="0,0,0,8"/>
                    <TextBlock Text="Higher compression = smaller file size but slower" 
                              FontSize="12" 
                              Foreground="{StaticResource SubtleBrush}"
                              Margin="0,0,0,8"/>
                    <ComboBox x:Name="CompressionLevelComboBox"
                             Padding="10"
                             Height="36"
                             Margin="0,0,0,24">
                        <ComboBoxItem Content="No Compression"/>
                        <ComboBoxItem Content="Fastest"/>
                        <ComboBoxItem Content="Optimal" IsSelected="True"/>
                    </ComboBox>

                    <!-- Archive Structure -->
                    <TextBlock Text="Archive Structure" 
                              FontSize="14" 
                              FontWeight="SemiBold"
                              Margin="0,0,0,8"/>
                    <TextBlock Text="How files are organized in the ZIP file" 
                              FontSize="12" 
                              Foreground="{StaticResource SubtleBrush}"
                              Margin="0,0,0,8"/>
                    <ComboBox x:Name="ArchiveStructureComboBox"
                             Padding="10"
                             Height="36"
                             Margin="0,0,0,24">
                        <ComboBoxItem Content="Direct (extract to BO3 root)" IsSelected="True"/>
                        <ComboBoxItem Content="Wrapped (package in root folder)"/>
                    </ComboBox>

                    <!-- Include Source GDT -->
                    <CheckBox x:Name="IncludeSourceGdtCheckBox"
                             Content="Include source GDT file(s) in package"
                             IsChecked="True"
                             Margin="0,8,0,16"/>

                    <!-- Validate Assets Before Packaging -->
                    <CheckBox x:Name="ValidateAssetsCheckBox"
                             Content="Validate all assets exist before packaging"
                             IsChecked="True"
                             Margin="0,0,0,16"/>

                    <!-- Sound Alias Handling -->
                    <TextBlock Text="Sound Alias Handling:"
                              FontWeight="SemiBold"
                              Margin="0,8,0,4"/>
                    <TextBlock Text="Choose how to handle sound aliases referenced in GDT files"
                              FontSize="11"
                              Foreground="#666"
                              TextWrapping="Wrap"
                              Margin="0,0,0,4"/>
                    <ComboBox x:Name="SoundAliasHandlingComboBox"
                             Margin="0,0,12,16"
                             Height="32">
                        <ComboBoxItem Content="Consolidate (create custom CSV with only referenced sounds)" IsSelected="True"/>
                        <ComboBoxItem Content="Copy full CSV files (include entire alias files)"/>
                        <ComboBoxItem Content="Skip sounds (don't include sound files)"/>
                    </ComboBox>

                    <!-- Include Attachment GDT -->
                    <CheckBox x:Name="IncludeAttachmentGdtCheckBox"
                             Content="Generate GDT file for resolved attachments"
                             IsChecked="True"
                             Margin="0,0,0,4"/>
                    <TextBlock Text="Creates a companion GDT file with full definitions for weapon attachments (scopes, lasers, etc.) found in common GDT files"
                              FontSize="11"
                              Foreground="#666"
                              TextWrapping="Wrap"
                              Margin="20,0,0,16"/>

                    <!-- Save Buttons -->
                    <StackPanel Orientation="Horizontal" 
                               HorizontalAlignment="Right"
                               Margin="0,24,0,0">
                        <Button Content="Cancel"
                              Width="100" 
                              Height="36" 
                              Margin="0,0,12,0"
                              Click="Cancel_Click"/>
                        <Button Content="Save"
                              Width="100" 
                              Height="36"
                              Click="Save_Click"
                              Style="{StaticResource PrimaryButton}"/>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>

            <!-- Advanced Settings Panel -->
            <ScrollViewer x:Name="AdvancedPanel" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="32">
                    <TextBlock Text="Advanced Settings" 
                              FontSize="24" 
                              FontWeight="Bold"
                              Margin="0,0,0,24"/>

                    <!-- Enable Logging -->
                    <CheckBox x:Name="EnableLoggingCheckBox"
                             Content="Enable detailed logging"
                             IsChecked="True"
                             Margin="0,0,0,16"/>

                    <!-- Auto-open logs on error -->
                    <CheckBox x:Name="AutoOpenLogsCheckBox"
                             Content="Automatically open logs when errors occur"
                             IsChecked="False"
                             Margin="0,0,0,24"/>

                    <!-- Default Package Name Pattern -->
                    <TextBlock Text="Default Package Name Pattern" 
                              FontSize="14" 
                              FontWeight="SemiBold"
                              Margin="0,0,0,8"/>
                    <TextBlock Text="Variables: {date}, {time}, {gdtname}" 
                              FontSize="12" 
                              Foreground="{StaticResource SubtleBrush}"
                              Margin="0,0,0,8"/>
                    <TextBox x:Name="PackageNamePatternTextBox"
                            Padding="10"
                            VerticalContentAlignment="Center"
                            Height="36"
                            Text="echo_packaged_{date}_{time}"
                            Margin="0,0,0,24"/>

                    <!-- Save Buttons -->
                    <StackPanel Orientation="Horizontal" 
                               HorizontalAlignment="Right"
                               Margin="0,24,0,0">
                        <Button Content="Cancel"
                              Width="100" 
                              Height="36" 
                              Margin="0,0,12,0"
                              Click="Cancel_Click"/>
                        <Button Content="Save"
                              Width="100" 
                              Height="36"
                              Click="Save_Click"
                              Style="{StaticResource PrimaryButton}"/>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Grid>
</Window>
